# 시스템 보안

허가받지 않은 사용자에 의한 파일, 폴더, 장치 등의 사용을 제한하여 보호하는 기능

- 계정과 패스워드 관리
- 세션 관리

  사용자와 시스템 또는 두 시스템 간의 활성화된 접속에 대한 관리로서 일정 시간이 지날경우 적절히 세션을 종료해 비인가자에 의한 세션 가로채기를 통제한다.

- 접근 제어

  시스템이 네트워크 안에서 다른 시스템으로부터 보호될 수 있도록 네트워크 관점에서 접근 통제

- 권한 관리

  시스템의 각 사용자가 적절한 권한으로 정보 자산에 접근할 수 있도록 접근 통제

- 로그 관리

  시스템 내부 혹은 네트워크를 통한 외부에서 시스템에 어떤 영향을 미칠 경우 해당 사항 기록

- 취약점 관리

## 운영체제 계정 관리

### 윈도우 계정관리

<p>관리자 그룹에 속한 계정 목록 확인 명령어 : net localgroup administrators</p>
<p>일반 사용자 확인 명령어 : net users</p>
<p>그룹 확인 명령어 : net localgroup</p>

- 윈도우 주요 그룹

1. Administrators

   관리자그룹으로 시스템의 모든 권한을 가진다.

2. Power Users

   관리자 그룹이 가진 권한을 대부분 가지지만, 로컬 컴퓨터에서만 관리할 능력도 가지고 있다.
   해당 컴퓨터 밖의 네트워크에서는 일반 사용자이다.

3. Backup Operators

   시스템 파일을 백업하는 권한을 가진다.

4. Users
5. Guests

   Users 그룹과 같은 권한을 가진다.

### 유닉스 계정관리

/etc/passwd 파일에서 계정 목록을 확인할 수 있다.

## 세션관리

세션이란 사용자와 컴퓨터 또는 두 컴퓨터 간의 활성화된 접속을 의미한다.
세션을 유지하기 위해서는 세션 하이재킹과 네트워크 패킷 스니핑에 대응하기 위해 암호화를 하는 방법과 세션에 대한 지속적인 인증을 하는 방법이 있다.

- 지속적인 인증

  1. 윈도우 화면보호기
  2. 공인인증서 패스워드나 보안카드 숫자를 반복해 물어보는 경우
  3. 패스워드 변경 시 기존 패스워드를 묻는 경우
  4. 패스워드 기간이 만료되어 재설정 요구

## 접근제어

텔넷, ftp 대신 암호화 세션을 제공하는 SSH를 사용한다.
IP기반의 접근 제어는 방화벽을 사용한다.
SSL(Secure Socket Layer)은 클라이언트와 서버 인증서를 이용한다.

## 권한관리

### 윈도우 권한관리

- 모든권한

  디렉터리에 대한 접근 권한과 소유권을 변경할 수 있으며, 하위 디렉터리와 파일 삭제가능

- 수정

  디렉터리 삭제 가능, 읽기, 실행, 쓰기 권한이 주어진다.

- 읽기 및 실행

  읽기를 수행할 수 있으며, 디렉터리나 파일을 옮길 수 있다.

- 디렉터리 내용 보기

  디렉터리 내의 파일이나 디렉터리 이름을 볼 수 있다.

- 읽기

  디렉터리 내용을 읽기만 할 수 있다.

- 쓰기

  해당 디렉터리에 하위 디렉터리와 파일을 생성할 수 있으며, 소유권이나 접근 권한 설정 내용을 확인 가능하다.

위 6가지 권한은 아래 규칙이 적용된다.

1. 접근권한은 누적된다.

   사용자가 그룹 A와 그룹 B에 모두 속한다면 두 그룹의 권한을 모두 가진다.

2. 파일을 포함하는 디렉터리의 권한 설정보다 파일에 대한 권한 설정이 우선한다.
3. '허용'보다 '거부'가 우선한다.

### 유닉스 권한관리

```
drw-r-xr-x root root
1           2    3
```

① 파일 종류와 권한을 의미한다.

② 파일 소유자를 의미한다.

③ 파일 그룹을 의미한다.

```
- rw- r-- r--
a  b   c   d
```

a : 파일 및 디렉터리 종류이다. - 표시는 일반 파일, d 표시는 디렉터리, l 표시는 링크를 의미한다.

b : 파일 및 디렉터리 소유자 권한이다.

c : 파일 및 디렉터리 그룹 권한이다.

d : 제 3의 사용자 권한이다.

### 데이터베이스 권한 관리

#### 질의문에 대한 권한 관리

- DDL

  데이터 구조를 정의하는 질의문
  DB를 생성하고 개발할 때 사용한다.

  - CREATE : DB객체 생성
  - DROP : DB객체 삭제
  - ALTER : DB객체 재정의

- DML

  운영 및 사용과 관련된 질의문
  데이터 검색과 수정을 처리한다.

  - SELECT : 사용자가 테이블이나 뷰의 내용을 읽고 선택
  - INSERT : DB객체에 데이터 입력
  - UPDATE : DB객체의 데이터 수정
  - DELECT : DB객체의 데이터 삭제

- DCL

  권한 관리 질의문

  - GRANT : DB객체에 권한 부여
  - DENY : 사용자에게 해당 권한 금지
  - REVOKE : DB객체의 권한 취소

#### 응용 프로그램 권한 관리

모든 응용 프로그램은 OS에 존재하는 계정에 의해 실행된다.
응용 프로그램은 실행한 계정의 권한을 물려받는다. 프로그램이 취약한 프로그램일 경우 해당 프로그램을 실행한 계정의 권한을 얻는 문제점이 있다. 따라서 IIS에서는 실행 프로세스 권한을 별도로 만들거나 linux에서는 제한된 계정 권한을 사용해야 한다.

## 로그 관리

- Authentication(인증) : 자신의 신원을 시스템에 증명하는 과정으로, 아이디와 패스워드를 입력하는 과정

- Authoriztion(인가) : 올바른 패스워드를 입력해 시스템에 로그인이 허락된 사용자라고 판명되어 로그인 되는 과정
- Accountion : 시스템에 로그인한 후 시스템이 이에 대한 기록을 남기는 활동

  위 3가지를 AAA라 부르며 AAA 로그 정보는 시스템에 접근한 해커를 추적하는 데 많은 도움이 된다.

### OS 로그 관리

윈도우는 이벤트라 불리는 중앙 집중화된 형태로 로그를 수집해 저장하지만, 유닉스는 로그를 여러 곳에 저장한다.
따라서 윈도우는 로그 관리가 편하지만, 공격자가 한 로그만 삭제하면 되므로 위험이 크고 로그에 대한 보안 수준도 낮은 편이다.

#### Windows 로그

제어판 - 시스템 보안 - 관리도구 - 이벤트 로그 보기 메뉴에서 확인가능하다.

##### windows 로그 종류

- 개체 엑세스 감사

  특정 파일이나 디렉터리, 레지스트리 키, 프린터 등과 같은 객체에 접근을 시도하거나 속성 변경 등을 탐지

- 계정 관리 감사

  신규 사용자, 그룹 추가, 기존 사용자 그룹의 변경, 사용자 활성화나 비활성화, 계정 패스워드 변경 등을 감사

- 계정 로그인 이벤트 감사

  로그온 이벤트 감사와 마찬가지로 계정의 로그인에 대한 사항을 로그로 남긴다. 로그온 이벤트 감사는 도메인 계정의 사용으로 생성되는 것이며, 계정 로그인 이벤트 감사는 로컬 계정의 사용으로 생성되는 것이다.

- 권한 사용 감사

  권한 설정 변경이나 관리자 권한이 필요한 작업을 수행할 때 로깅한다.

- 로그인 이벤트 감사

  로컬 계정의 접근 시 생성되는 이벤트를 감시하는 것이다. 계정 로그온 이벤트 감사에 비해 다양한 종류의 이벤트를 확인할 수 있다.

- 디렉터리 서비스 엑세스 감사

  시스템 엑세스 제어 목록이 지정되어 있는 액티브 디렉터리 개체에 접근하는 사용자에 대한 감사 로그를 제공한다.

- 정책 변경 감사

  사용자 권한 할당 정책, 감사 정책 또는 신뢰 정책의 변경과 관련된 사항을 로깅한다.

- 프로세스 추적 감사

  사용자 또는 응용 프로그램이 프로세스를 시작하거나 중지할 때 해당 이벤트가 발생한다.

- 시스템 이벤트

  시스템의 시동과 종료, 보안 로그 삭제 등 시스템의 주요 사항에 대한 이벤트를 남긴다.

##### Linux 로그

/var/log 디렉터리에 로그가 저장된다.

- UTMP

  가장 기본적인 로그로 로그인 계정 이름, 로그인한 환경, 로그인한 디바이스, 로그인한 셸의 프로세스 ID, 로그인한 계정의 형식, 로그오프 여부,
  시간에 대한 저장 구조를 확인할 수 있다. 바이너리 형태로 로그가 저장되며 w, who, users, whodo, finger 등의 명령어를 사용한다.

- WTMP

  사용자 로그인, 로그아웃, 시스템 재부팅 정보를 갖는다. last 명령어를 사용한다. 특정 항목을 확인할 경우 `last reboot`, `last console` 등을 사용한다.

- secure

  secure 파일에 원격지 접속 로그와 su(switch user) 및 사용자 생성 등의 보안과 직접적으로 연관된 로그가 저장된다.
  su 로그는 /var/adm/sulog파일에 텍스트 형식으로 저장된다. 형식은 아래와 같다.

  `날짜 시간 +(성공) -(실패) 터미널 종류 권한 변경 전 계정 - 변경 후 계정`

- history

  명령창에서 실행했던 명령 기록을 확인한다.

- syslog

  시스템 운영과 관련한 전반적인 로그로서 /var/log/messages 파일에 하드웨어 구동, 서비스 동작 에러 등의 로그를 저장한다.

##### 네트워크 장비 로그

- 네트워크 보안 시스템 로그

  IDS, IPS, 방화벽 등 보안시스템 로그는 통합로그관리시스템(SIEM)에 의해 수집된다.

- 네트워크 관리 시스템 로그

  네트워크 트래픽 모니터링 시스템(MRTG), 네트워크 관리 시스템(NMS) 로그를 수집한다.

- 네트워크 장비 인증 시스템 로그

  대규모 시설은 TACACS+(Terminal Access Controller Access-Control System Plus)를 사용해 네트워크 장비에 대한 인증 시도 및 로그인 정보를 확인한다.
  네트워크 장비에서 생성되는 로그는 로그 서버에 전송된다.
