# 시스템의 이해
<br>

## 시스템과 네트워크
<br>

- 시스템에 대한 과거의 인식은 하나의 하드웨어가 설치된 하나의 시스팀이었다.

- 오늘날의 시스템은 점차 네트워크가 강해지고 시스템 간의 경계가 희미해지면서 과거처럼 완전한 점의 형태가 아닌 경우가 많다.

<br>

## 시스템 보안
<br>

: 권한이 없는 사용자가 파일이나 폴더, 장치 등을 사용하지 못하게 제한하여 시스템을 보호하는 기능이다.

<br>

### 1. 계정 관리
<br>

- 적절한 권한을 가진 사용자를 식별하는 가장 기본적인 인증 수단으로 아이디와 패스워드가 있다.

<br> 

### 2. 세션 관리
<br>

-  일정 시간이 지나면 세션을 종료하고 비인가자의 세션 가로채기를 통제한다.

        세션 : 사용자와 시스템 사이 또는 두 시스템 사시의 활성화된 접속

<br>

### 3. 접근 제어
<br>

- 네트워크 안에서 시스템을 다른 시스템으로부터 적절히 보호할 수 있도록 네트워크 관점에서 접근을 통제한다.

<br>

### 4. 권한 관리
<br>

: 시스템이 각 사용자가 적절한 권한으로 적절하게 정보 자산에 접근할 수 있도록 통제하는 것이다.

<br>

### 5. 로그 관리
<br> 

- 시스템 내부나 네트워크를 통해 외부에서 시스템에 어떤 영향을 미칠 경우 그 내용을 기록하여 관리한다.

<br>

### 6. 취약점 관리
<br>

: 시스템 자체의 결함을 체계적으로 관리하는 것이다.

<br>

# 계정 관리
<br>

- 계정의 기본 구성 요소는 아이디와 패스워드이다.

- 어떤 시스템에 로그인을 하려면 먼저 자신이 누군지 알려야 하는데 이를 식별 과정이라 한다.

- 정확한 식별이 어렵기 때문에 로그인을 허용하기 위한 확인, 즉 인증을 위햐 패스워드를 요청한다.

<br>

> 패스워드는 보안의 네 가지 인증 방법

- 알고 있는 것

  - 머릿속에 기억하고 있는 정보를 이용하여 인증을 수행한다.
  
  - 대표적인 예
    
    - 패스워드
- 가지고 있는 것

  - 신분증이나 OTP 정치 등으로 인증을 수행한다.

  - 대표적인 예
    
    - 출입 카드
- 자신의 모습

  - 홍채와 같은 생체 정보로 인증을 수행한다.

  - 대표적인 예

    - 지문 인식
- 위치하는 곳

  - 현재 접속을 시도하는 위치의 적절성을 확인하여 인증을 수행한다.

  - 대표적인 예

    - 콜백

<br>

## 운영체제의 계정 관리
<br>

    운영체제 : 시스템을 구성하고 운영하기 위한 가장 기본적인 것이다.

<br>

### 1. 윈도우의 계정 관리
<br>

> administrator

- 윈도우에서는 운영체제의 관리자 권한을 가진 계정이다.

- 시스템에 가장 기본으로 설치되는 계정이다.

<br>

>  윈도우의 주요 그룹
- Administrators
  
    - 대표적인 관리자 그룹으로 윈도우 시스템의 모든 권한을 가지고 있다.

    - 사용자 계정을 만들거나 없앨 수 있고 디렉터리와 프린터를 공유하는 명령을 내릴 수 있다.
    - 사용 가능한 자원에 대한 권한을 설정할 수 있다.
- Power Users

  - Administrators 그룹이 가진 권한을 대부분 가지지만 로컬 컴퓨터에서만 관리할 능력도 가지고 있다.
  - 해당 컴퓨터 밖의 네트워크에서는 일반 사용자로 존재한다.
- Backup Operators

  - 윈도우 시스템에서 시스템 파일을 백업하는 권한을 가지고 있다.

  - 로컬 컴퓨터에 로그인하고 시스템을 종료할 수 있다.
- Users

  - 대부분의 사용자가 기본으로 속하는 그룹으로, 여기에 속한 사용자는 네트워크를 통해 서버나 다른 도매인 구성 요소에 로그인할 수 있다.

  - 관리 계정에 비해 한정된 가지고 있다.
- Guests

  - 윈도우 시스템에서 Users 그룹과 같은 권한을 가지고 있다.

  - 두 그룹 모두 네트워크를 통해 서버에 로그인할 수 있으며 서버로의 로컬 로그인은 금지된다.

<br>

### 2. 유닉스의 계정 관리
<br>

- 유닉스 계열의 시스템에서는 기본 관리자 계쩡으로 root가 존재한다.

- 유닉스에서 관리자 권한은 사용자 번호와 그룹 번호로 식별한다.

- 유닉스에서도 root를 제외한 그룹은 윈도우처럼 모두 임의로 생성되며 고유의 권한이 없다.

- 계정 생성과 삭제 시의 적절한 승인 절차가 마련되어야 하고 불필요한 계정이 있는지, 불필요하게 관리자 권한 등이 부여되는지를 주기적으로 확인해야 한다.

<br>

## 데이터베이스의 계정 관리
<br>

- 데이터베이스도 운영체제처럼 계정이 존재한다.

- 운영체제 계정을 제대로 관리하지 못한다면 데이터베이스 계정 관리는 아무 소용이 없다.

- MS-SQL의 관리 계정은 sa이고 오라클의 관리자 계정은 sys, system이다.

- 오라클은 다른 데이터베이스와 다른 특징이 있다.

      윈도우의 Guest 계정처럼 Scott이라는 기본 계정이 존재한다. 
      
      솔루션을 설치하거나 테이블을 생성할 때 관련 계정이 자동으로 생성되는 경우가 
      많다.
      
      그런 계정이 불필요한 경우에는 잠금 상태로 바꾸고, 필요한 경우에는 패스워드를 적절히 바꿔야 한다.

<br>

## 응용 프로그램의 계정 관리
<br>

- 응용 프로그램 역시 고유의 계정을 가지기도 하고 운영체제와 계정을 공유하기도 한다.

- 은영체제와 응용 프로그램의 계정이 다르면 응용 프로그램의 계쩡을 소홀히 하는 경우가 있는데 이는 간혹 보안상 큰 위험이 될 때도 있다.

- 인증이 필요치 않은 응용 프로그램일 경우 더욱 섬세한 주의가 필요하다.

<br>

## 네트워크 장비의 계정 관리
<br>

- 네트워크 장비는 보통 패스워드만 알면 접근이 가능하다.

- 네트워크 장비도 계정을 생성하여 각 계정으로 사용할 수 있는 명령어 집합을 제한할 수 있다.

- 네트워크가 대규모인 경우에는 계정 관리의 어려움 때문에 통합된 계정 관리를 위해 TACACS+와 같은 솔루션을 적용하기도 한다.

<br>

## 패스워드 관리
<br>

    패스워드 : 가장 기본적인 인증 방법이다.
- 패스워드는 적절한 강도를 가진 상태로 설정하고 패스워드 정책에 따라 적절히 보호해야 한다.

<br>

### 1. 부적절한 태도
<br>

- 길이가 너무 짧거나 널인 패스워드

- 사전에 나오는 단어나 그 조합 또는 변형

- 키보드 자판의 일련 나열

- 사용자 계정 정보로 유추할 수 있는 단어

<br>

### 2. 패스워드 정책
<br>

- 아무리 잘 만든 패스워드라도 영원히 안전할 수 없다.

- 패스워드를 자주 사용하면 노출의 위험도가 커지기 때문이다.

<br>

> 패스워드 설정 정책
- 패스워드의 길이와 복잡도를 정해둔다.

<br>

> 패스워드 변경 정책
- 일반적으로 60일 또는 90일 간격으로 패스워드를 변경하도록 하고 있다.

<br>

> 잘못된 패스워드 입력 시 계정 잠금
- 잘못된 패스워드를 반복해서 입력하면 패스워드 크래킹 공격 또는 비인가자의 접근 시도로 판단하여 해당 계정을 사용하지 못하게 설정한다.

- 페스워드 정책은 윈도우의 경우 비교적 적용하기 쉽지만 유닉스에서는 시스템별로 편차가 있어 적용하기 어렵다.

- 계정을 응용 프로그램에 하드코딩하여 사용하는 경우에는 패스워드의 변경이 어렵다.

- 응용 프로그램을 작성할 때 계정 정보의 하드코딩은 피하는 것이 좋다.

<br>

# 세션 관리
<br>

- 컴퓨터에서 세션을 적절히 유지하기 위한 보안 사항이 있다.

  - 세션 하이재킹이나 네티워크 패킷 스니핑에 대응하기 위해 암호화하는 것이다.

  - 세션에 대한 지속적인 인증을 하는 것이다.

<br>

> 세션의 지속적인 인증 문제

    지속적인 인증 : 시스템에 접근하는 사용자가 처음 인증에 성공한 그 사용자인지 확인하기 위해 지속적으로 재인증을 수행하는 것이다.
- 세션에 대한 타임아웃 설정으로 보완하는데 윈도우의 화면 보호기가 그 예이다.

- 윈도우의 화면 보호기는 사용자가 원격에서 접속해도 똑같이 동작한다.

- 시스템별로 차이가 있으나 일반적으로 사용자의 일반 환경을 설정하는 파일에서 타임아웃 값을 명시적으로 설정한다.

- 데이버베이스에서는 일반적으로 세션에 대한 타임아웃을 적용하지 않는다.

<br>

# 접근 제어
<br>

: 적절한 권한을 가진 인가자만 특정 시스템이나 정보에 접근할 수 있도록 통제하는 것이다.

<br>

## 운영체제의 접근 제어
<br>

- 운영체제에 대한 적절한 접근 제어를 수행하려면 가장 먼저 운영체제에서 어떤 관리자 인터페이스가 운영되고 있는지를 파악해야 한다.

- 불필요한 인터페이스를 제거할 때는 사용할 인터페이스에 보안 정책을 적용할 수 있는지를 판단해야 한다.

- 운영체제에 대한 접근 목적의 인터페이스를 결정한 다음에는 접근 제어 정책을 적용해야 한다.

<br>

## 데이터베이스의 접근 제어
<br>

    데이터베이스 : 조직의 영업 및 운영 정보를 담고 있는 핵심 응용 프로그램이다.
- 데이터베이스에 대한 적정한 접근 제어는 필수이지만 모든 데이터베이스가 적절한 접근 제어 수단을 제공하는 것은 아니다.

<br>

## 응용 프로그램의 접근 제어
<br>

- 웹 서비스를 재공하는 IIS와 아파치 역시 IP에 대한 접근 제어를 제공한다.

- SSL은 클라이언트와 서버 인증서를 이용하여 접근 제어를 수핼할 수도 있다.

<br>

## 네트워크 장비의 접근 제어
<br>

- 네트워크 장비도 IP에 대한 접근 제어가 가능하다.

- 네트워크 장비에서 수행하는 IP에 대한 접근 제어로는 관리 인터페이스의 접근 제어와 ACL을 통한 네트워크 트래픽 접근 제어가 있다.

<br>

# 권한 관리
<br>

## 운영체제의 권한 권리
<br>

### 1. 윈도우의 권한 권리
<br>

- 윈도우는 NT 4.0 이후 버전부터 NTFS를 기본 파일 시스템으로 사용한다.

<br>

> 권한의 종류
- 모든 권한

- 수정

- 읽기 및 실행

- 디렉터리 내용 보기

- 읽기

- 쓰기

<br>

> 권한의 규칙
1. 접근 권한이 누적된다.

2. 파일 접근 권한이 디렉터리 접근 권한보다 우선한다.

3. '허용'보다 '거부'가 우선이다.

<br>

### 2. 유닉스의 권한 권리
<br>

- 유닉스는 파일과 디렉터리에 대한 권한 설정 방법이 같다.

<br>

## 데이터베이스의 권한 권리
<br>

### 1. 질의문에 대한 권한 권리
<br>

- 데이터베이스의 권한을 관리하려면 먼저 데이터베이스에서 사용하는 질의문을 알아야 한다.

- 데이터베이스는 기본적으로는 질의문 단위로 통제한다.
    
    - DDL : 데이터 구조를 정의하는 질의문이다.
    
    - DML : 데이터 검색과 수정 등을 처리하는 질의문이다.

    - DCL : 권한 관리를 위한 질의문이다.

<br>

### 2. 뷰에 대한 권한 관리
<br>

    뷰 : 참조테이블의 각 열에 대해 사용자의 권한을 설정하는 것이 불편해서 만든 가상 테이블이다.
      - 데이터베이스에 대한 중요한 보안 사항 중 하나이다.
__회사의 연봉제__

- 연봉제의 경우 각 직원의 연봉 정보를 비밀로 유지하는 것이 중요하다.

- 특정 직책의 직원 외에는 연봉 정보에 대한 접근 권한을 모두 제한해야 한다.

- 뷰가 없다면 주소와 연봉에 각각 접근 제한을 설정해야 할 것이다.

- 직원 정보 테이블의 이름과 전화번호로만 생성된 뷰가 있다면 그 뷰에 대한 권한만 할당하면 된다.

<br>

## 응용 프로그램의 권한 관리
<br>

- 응용 프로그램의 권한 설정은 응용 프로그램마가 조금씩 다른 형태를 띤다.

- 하지만 전반적으로는 관리자 계정과 일반 사용자 계정으로 나뉜다.

- 모든 응용 프로그램은 운영체제에 존재하는 어떤 한 계쩡에 의해 실행된다.

<br>

# 로그 관리
<br>

- AAA 

  :  시스템 사용자가 로그인 후 명령을 내리는 과정에 대한 시스템의 동작이다.

  - Authentication : 자신의 신원을 시스템에 증명하는 과정이다.

  - Authorization : 로그인이 허락도니 사용자로 판명되어 로그인하는 과정이다.

  - Accounting : 로그인을 했을 때 시스템이 이에 대한 기록을 남기는 활동이다.
- AAA에 대한 로그 정보는 해커나 시스템에 접근한 악의적인 사용자를 추적하는 데 많은 도움이 된다.

- 책임 추적상

  : 추적에 대한 기록의 총실도이다.

  - 책임 추적성이 높은 시스템일수록 로그가 충실하게 남아 있다고 생각할 수 있다.
- 감사 추적

  : 보안과 관련하여 시간대별 이벤트를 기록한 로그를 말한다.

<br>

## 운영체제의 로그 관리
<br>

- 윈도우와 유닉스는 상당히 다른 로그 체계를 가지고 있다.

- 윈도우는 이벤트라 불리는 중앙 집중화된 형태로 로그를 수집하여 저장한다.

- 유닉스는 로그를 여러 곳에 산발적으로 저장한다.

<br>

### 1. 윈도우의 로그
<br>

- 윈도우의 감사 정책, 즉 로깅 정책은 기본적으로 수행하지 않게 설정되어 있다.

- 필요할 경우 수행하도록 설정해야 하며, 설정 시 '성공'과 '실패'에 따라 선택적으로 로깅을 수행할 수 있다.

<br>

> 윈도우의 로그 종류
- 개체 엑세스 감사

- 계정 관리 감사

- 계정 로그인 이벤트 감사

- 권한 사용 감사

- 로그인 이벤트 감사

- 디렉터리 서비스 액세스 감사

- 정책 변경 감사

- 프로세스 추적 감사

- 시스템 이벤트

<br>

### 2. 유닉스의 로그
<br>

> 유닉스의 로그 종류
- utmp

- wtmp

- secure(suiog)

- history

- syslog

<br>

## 데이터베이스의 로그 관리
<br>

- 데이터베이스에 대한 접근 및 데이터 처리 로그는 데이터 유츨과 직접적인 관련이 있기 때문에 시스템 성능이 수용할 수 있는 범위 내에서 적절하게 로깅 정책을 적용해야 한다.

<br>

### 1. MS-SQL의 로그
<br>

- C2 감사 추적

  : 데이터베이스가 생성/삭제/변경되는지에 대한 자세한 정보를 로그로 남기는 것이다.

  - 빈번한 접속이 있는 데이터베이스의 경우 대량의 로그를 생성할 수 있다.

<br>

### 2. 오라클의 로그
<br>

> 오라클에서 남길 수 있는 데이터베이스 감사의 종류
- 문장 감사

  : 지정된 문장을 실행했을 때 기록을 남긴다.
- 권한 감사

  : 특정한 권한을 사용했을 때 기록을 남긴다.
- 객체 감사

  : 특정 객체에 대한 작업을 했을 때 기록을 남긴다.

<br>

### 3. 데이터베이스 모니터링
<br>

- 데이터베이스에 대한 로그를 남기는 가장 좋은 방법은 별도의 데이터베이스 모니터링 툴을 도입하는 것이다.

<br>

> 네트워크 트래픽을 모니터링 할 수 있는 방법
- 태핑 장비를 네티워크에 설치한다.

- 네티워크 패킷 중에서 데이터베이스 질의문을 확인하여 이를 로그로 남긴다.

<br>

## 응용 프로그램의 로그 관리
<br>

- 보안과 관련해서 가장 흔히 접할 수 있는 응용 프로그램은 웹 서버와 FTP 서버이다.

<br>

### 1. IIS 웹 서버의 로그
<br>

- IIS 웹 서버에서 로그는 기본 W3C 형식으로 남도록 설정돼 있다.

- IIS 웹 서버의 기본 설정이면서 가장 널리 이용되는 로그 형식은 'W3C 확장 로그 파일 형식'이다.

<br>

### 2. 아파치 웹 서버의 로그
<br>

- 아파치 웹 서버에 대한 기본 접근 로그는 access_log에 남고 형식은 'combined'로 지정된다.

- combined가 기본 로그 형식이다.

<br>

## 네트워크 장비의 로그 관리
<br>

> 네트워크 보안 시스템의 로그
- 다양한 보안 시스템의 로그를 확인할 수 있다.

- 다양한 보안 시스템의 로그는 통합 로그 관리 시스템에 의해 수집/관리되기도 한다.

<br>

> 네트워크 관리 시스템의 로그
- 네트워크 트래픽 모니터링 시스템과 네트워크 관리 시스템의 로그를 참고할 수 있다.

<br>

> 네트워크 장비 인증 시스템의 로그
- 대규모 네트워크를 운영하는 곳에서는 라우터나 스위치의 인등을 일원화하기 위해 인증 서버로 TACACS+를 사용하기도 한다.

- 라우터나 스위치 같은 네트워크 장비에는 하드디스크와 같은 저장 공간이 없어 로그를 남기지 않은 채로 운영한다.

- 대신 로그 서버를 별도로 두고 운영한다.

<br>

# 취약점 관리
<br>

## 패치 관리
<br>

- 운영체제나 데이터베이스와 같은 응용 프로그램을 만든 제작사가 배포하는 패치 또는 서비스 팩을 적용해야 한다.

- 시스템에 내재된 취약점은 유닉스에도 있지만 윈도우는 사용률이 훨씬 높고 접근하기도 쉬워 공격을 더 많이 받는다.

- 유닉스보다 윈도우에서 패치의 중요성이 상대적으로 크다.

- 윈도우의 경우 윈도우 업데이트를 통해 자동으로 보안 패치를 확인하고 적용할 수 있다.

<br>

## 응용 프로그램별 고유 위험 관리
<br>

- 응용 프로그램 중에는 해당 응용 프로그램을 통해 파일이나 명령을 실행할 수 있는 것이 있다.

- xp_cmdshell

  : MS-SQL에서 지원하는 '확장 저장 프러시저'이다.

  - MS-SQL 관리자 계정의 패스워드가 취약한 경우에는 운영체제에 대한 접근 권한도 노출될 수 있다

<br>

## 응용 프로그램의 정보 수집 제한
<br>

- 응용 프로그램이 운영체제에 직접적인 영향을 미치지 않더라도 응용 프로그램의 특정 기능이 운영체제의 정보를 노출 시키기도 한다.

- 불필요한 서비스나 악성 프로그램을 확인하여 제거하는 것은 주요 서비스나 응용 프로그램의 보안 설정만틈 매우 중요하다.
