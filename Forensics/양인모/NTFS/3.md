# MFT 엔트리 주소

각 MFT 엔트리는 48비트 값을 이용해 순차적으로 주소가 지정되며, 첫 엔트리는 주소 0을 갖는다.
최대 MFT 주소는 MFT가 증가할 때 마다 변경되고, \$MFT 크기를 각 엔트리 크기로 나눠서 결정한다. MS는 이런 순차적 주소를 파일 번호라 부른다.

MFT 엔트리는 할당될 때마다 증가하는 16비트 순서 번호를 갖는다. MFT 엔트리와 순서번호는 상위 16비트 순서 번호와 함께 조합되어 64비트 파일 참조 주소를 만든다. NTFS는 `순서 번호가 파일시스템이 손상된 상태인지 판단할 수 있게 도와준다.` 그래서 MFT 엔트리를 참조하는데 파일 참조 주소를 사용한다.

# 파일시스템 메타데이터 파일

볼륨의 모든 바이트는 파일에 할당되기 때문에 파일시스템 관리 데이터를 저장하는 별도의 파일이 있어야만 한다. 이 별도의 파일을 파일시스템 메타데이터 파일이라 부른다.
첫 16개 MFT 엔트리들을 파일시스템 메타데이터 파일로 예약한다. 모든 파일시스템 메타데이터 파일은 숨김파일로 루트디렉토리에 존재한다. 파일명은 `$`로 시작하고 첫 번째 문자는 대문자로 쓴다. 엔트리는 24개가 있고 12~23 엔트리는 사용하지 않는다.

# MFT 엔트리 속성 개념

MFT 엔트리의 내부 구조체는 특정 유형의 데이터를 저장하는 데이터 구조체다.
데이터 구조체는 속성을 저장한다. 속성은 다양한 타입들로 구성되어 내부 구조체를 갖는다.
**모든 파일시스템은 파일 내용을 읽고 쓰기 위해 존재하지만, NTFS는 속성들을 읽고 쓰기 위해 존재한다.**

MFT 엔트리는 큰 상자, 속성은 작은 상자와 같다.
큰 상자(MFT 엔트리) 안에 작은 상자(속성)들이 있다. 이사할 때 책을 담을 상자, 옷을 담을 상자를 정하듯이 속성들도 저장하는 데이터 타입이 정해져 있다.
예를 들어 파일명을 위한 속성, 날짜와 시간, 그리고 데이터에 대한 속성 등이 있다.
모든 속성은 헤더와 내용으로 구성된다.

## 속성 헤더

속성 헤더는 속성의 타입, 크기, 이름을 구분한다. 이 값들이 압축되었는지, 암호화되었는지 식별하는 플래그 값이 있다. 속성 타입은 데이터 타입에 기초하는 숫자 식별자이며, `0x10`, `0x30`, `0x80` 등이 있다. 속성은 MFT 엔트리에서 고유 식별자다.
