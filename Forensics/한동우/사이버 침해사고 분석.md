# 보안위협 정보수집
## 1. 보안 위협

### Bash 셸
- 사용자의 명령을 받아 처리하는 명령 해석기(윈도우의 cmd창)
- Bash 환경 변수로 저장되는 해더 항목에 공격 구문 삽입 및 웹 서버에 접속해 악성코드파일 다운로드 후 백도어로 이용
### APT 공격
- 오랜 시간에 걸쳐 사용자가 알아채지 못하게 지속적으로 공격 활동을 함

### 내부위협
- 퇴직자에 의한 내부 자료유출, 프로젝트 수행시 발생되는 고객 DB 정보 접근 제어
- 위협에 관한 카태고리를 분류해서 효율적으로 대응 가능
## 2. 침입 분석 솔루션

### 네트워크 방어
- 네트워크 침입탐지 시스템
    - 실시간으로 네트워크 패킷 분석 수집을 통해 시크니처 기반의 공격을 탐지
- 네트워크 포렌식
    - 모든 네트워크 패킷을 일정 기간 보관, 사고 발생시 발생 시점의 전체 네트워크 패킷을 분석

### 네트워크 침입탐지 시스템
- 프로토콜 기반의 침입탐지 엔진
    - HTTP, FTP, SSH등의 애플리케이션 기반으로 네트워크 트래픽을 분석하는 탐지엔진. 분석 결과는 탐지된 모든 개별 통신에 대해 로그로 기록
- 애플리케이션 기반의 탐지 방식
    - 애플리케이션에 대해 분석하고 모두 로그로 남김
    - 탐지 시그니처가 없어서 제로데이 공격도 탐지가능
    - 감사 기능으로서도 활용가능
    - 충분한 저장공간 필요
### 호스트 기반 침입탐지 시스템
- OSSEC
    - 윈도우/리눅수 기반의 로그 및 시스템 정보를 중앙 서버와 에이전트를 통해 수집하는 오픈소스 솔루션
    - 시스템 로그감시 및 파일 시스템 무결성 감시가능
## 3. 패킷 정보 수집
###  패킷
- 네트워크 트랜잭션의 기본 단위로 필요한 정보
- 이메일 전송, 파일 전송, 문서 출력, 기타
- 각각의 패킷은 고유하게 식별
### 패킷 페이로드 정보
- 네트워크를 통해서 이루어 지는 공격은 모든 패킷에 흔적이 남게됨
- 애플리케이션 통신에 해당하는 정보가 남겨지고 입력 값을 조작하거나 추가하면 페이로드에 정보가 남겨짐
- 핵심 메시지
    - 출발지 IP 주소 : 네트어크 통신시 연결을 요청한 시스템의 IP 주소
    - 출발지 포트 : 네트워크 통신 시 연결을 요청한 시스템의 통신포트
    - 도착지 IP 주소 : 네트워크 통신 시 연결을 수신한 시스템의 IP 주소
    - 도착지 포트 : 네트워크 통신 시 연결을 수신한 시스템의 통신 포트
    - 타임스탬프 : 패킷의 발생된 시간
    - 페이로드 : 두 시스템 간에 주고받은 데이터
### 패킷 메타정보 이해
- 침해 인자
    - 페이로드에 남겨진 키워드
    - 계정 이름, 응답 코드 종류, 통신 프로토콜 타입, IP, 서버 타입, 사용자 에이전트 정보 등
- 특정 키워드를 발견하게 되면 키워드와 연관된 정보들을 로그나 패킷에서 확인
### 세션정보 수집
- 세션
    - 사용자와 서버가 통신한 패킷을 모두 합친것
    - 트래픽 양, 패킷양, 통신 플래그 확인가능
### 시스템 정보 수집
- 공격자가 시스템에 들어와 수행한 내역은 시스템 정보를 통해 발견가능
- 정보를 수집할 때 휘발성 데이터에 유의
- 수집항목

| 수집항목 |                  설명                  |
| :--------: | :------------------------------------: |
|    OS 기본정보     |         시스템의 운영체제 정보          |
|   계정 정보    |             서비스 시스템에 생성된 계정 및 권한 정보 점검              |
|  네트워크 정보   |         연결된 세션 정보 수집, 휘발성 정보도 메모리에 올라온 정보를 수집하거나라이브 시스템에서 직접 수집 필요. 시스템이 재부팅되면 사라지는 정보 점검          |
|  프로세스 정보   | 악성코드 감염에 의해 신규 프로세스가 생성되거나 기존 프로세스에 악성코드 삽입 점검  |
|  포트별 프로세스 정보   | 시스템에 활성화된 전체 포트 목록 점검 |
|  애플리케이션 정보   |             설치된 프로그램 목록 점검              |
|  파일 점검   |          타임 테이플에 따라 파일 생성 일자 점검          |
|  서비스 목록 점검  |  악성코드나 공격자에 의한 서비스 등록 점검     |
| 예약 작업  |  악성코드나 공격자에 의한 예악 목록 점검    |
| 보안 설정  |  시스템 분석에 필요한 보안 설정 점검   |
|  에플리케이션 보안 설정  |  서비스용 애플리케이션의 속성 점검   |
| 로그 점검  |  로그 파일 보관 주기 점검  |

# 분석가의 역할