# 메모리

## 16진수

컴퓨터 과학에서는 숫자를 10진수, 2진수 대신 16진수(Hexadecimal)로 표현하는 경우가 많다. 16진수를 사용하면 데이터 처리 시 10진수보다 2진수를 더 간단하게 표현할 수 있다.

### 10진수를 16진수로 바꾸어보기

JPG 이미지 파일은 항상 255 216 255로 시작되고 이것은 10진수이다. 하지만 실제 컴퓨터는 2진수를 사용한다.

255 216 255를 2진수로 나타내면 위 그림과 같다. 2진수로 모든 데이터를 표현하기에는 너무 길어 컴퓨터 과학자는 16진수로 표현하기로 결졍했다. 2의 4제곱이 16이기 때문에 4bits씩 두 덩어리로 나누어 보면 0000 부터 1111까지는 16진수로 표현할 수 있다. 10부터 15까지 16진수는 아래와 같이 표현한다. 4bits씩 16진수로 변환 후 0x를 붙혀 뒤에 오는 문자들이 16진수임을 알린다.

- 10 : a

- 11 : b

- 12 : c

- 13 : d

- 14 : e

- 15 : f

### 16진수의 장점

ASCII 코드에서 "A, B, C"는 10진수로 65, 66, 67에 해당한다. 컴퓨터는 10진수를 이해할 수 없어 2진수로 표현하면 "01000001 01000010 01000011＂이 된다. 컴퓨터가 처리할 수 있어야 하기 때문에 어쩔 수 없지만 사람이 보기에는 길이가 너무 길다. 하지만 16진수로 표현하면 2진수로 표현할 때 보다 훨씬 간단하다. 또한 컴퓨터는 8개 비트가 모인 바이트 단위로 정보를 표현한다. 2개의 16진수는 1byte의 2진수로 변환되기 때문에 정보를 표현하기 적합하다.

## 메모리 주소

정수형 변수 n에 50을 저장하고 출력한다. 그럼 아래 그림과 같이 컴퓨터 메모리 어딘가에 int 타입이므로 4바이트 크기의 메모리를 할당받고 저장된다.

```c
#include <stdio.h>

int main(void)
{
  int n = 50;
  printf("%p\n", &n); //0x7ffe00b3adbc
}
```

`&`연산자를 사용하면 변수의 메모리상 주소를 얻을 수 있다.

`*`연산자를 사용하면 해당 메모리 주소에 있는 **실제 값**을 얻을 수 있다.

## 포인터

포인터란 '가리키는 것'이란 의미를 지닌다.
프로그램 작동 시 컴퓨터는 각 방의 데이터가 필요해 방들마다 주소를 붙여 데이터를 꺼내기 쉽게 만들었다.
방의 주소를 얻는 방법이 '포인터'이다.
`int`, `char`변수처럼 포인터도 변수다.
포인터 변수는 특정한 데이터가 저장된 주소값을 보관하는 변수다.

- Pointer : 메모리 상에 위치한 특정한 데이터의 시작주소 값을 보관하는 변수

포인터는 `int`, `char`처럼 형(type)이 있다.
이 말은 포인터가 메모리 상의 `int`형 데이터의 주소값을 저장하는 포인터와 `char`형 데이터의 주소값을 저장하는 포인터가 서로 다르다는 말이다.

```c
int *p;
char *p;
```

## & 연산자

포인터는 주소를 보관하는 변수다. 그럼 주소는 어떻게 알아내는 걸까?
'&' 연산자를 사용하면 주소값을 구할 수 있다.

```c
/* & 연산자 */
#include <stdio.h>
int main() {
  int a;
  a = 2;

  printf("%p \n", &a);
  return 0;
}
```

포인터 'p'에 들어 있는 값과 변수 'a'가 저장된 주소값이 같다. 즉 a의 주소값을 포인터 변수 p에 저장했다는 의미이다.

```c
#include <stdio.h>
int main() {
  int *p;
  int a;

  p = &a; // 변수 a의 주소값을 저장한다.

  printf("포인터 p 에 들어 있는 값 : %p \n", p);
  printf("int 변수 a 가 저장된 주소 : %p \n", &a);

  return 0;
}
```

### 정리

1. 포인터는 특정한 데이터의 주소값을 보관한다.
2. 포인터는 주소값을 보관하는 데이터의 형에 '\*'를 붙임으로써 정의된다.
3. '&'연산자로 특정한 데이터의 메모리 주소값을 구한다.

# \* 연산자

\* 연산자 역할

1. 포인터 변수에 저장된 주소값의 데이터를 가져온다.
2. 포인터 변수에 저장된 주소값에 위치한 데이터

포인터 변수와 정수형 변수의 값이 같다.

```c
/* * 연산자의 이용 */
#include <stdio.h>
int main() {
  int *p;
  int a;

  p = &a;
  a = 2;

  printf("a 의 값 : %d \n", a); // 2
  printf("*p 의 값 : %d \n", *p); // 2

  return 0;
}
```

포인터 변수에 `a`의 주소값을 저장한다.
`*p`는 포인터에 저장된 주소(변수 a의 주소)에 해당하는 데이터(변수 a)를 의미한다.
따라서 `*p = 3` 은 `a = 3`과 같은 의미다.

```c
#include <sdtio.h>
int main()
{
    int *p;
    int a;

    p = &a;
    *p = 3;

    printf("a의 값 : %d \n", a); // 3
    printf("*p의 값 : %d \n", *p); // 3

    return 0;
}
```

## 포인터 자체의 의미

변수 `a`와 포인터 `p`의 메모리 상의 모습은 아래와 같다.

![](https://images.velog.io/images/jjewqm/post/e7e23e3f-239a-4bd7-bcfd-80c97acfb3d9/%ED%8F%AC%EC%9D%B8%ED%84%B0.png)

포인터 `p`에 변수 `a`의 주소값이 저장되어 있다면 **포인터 `p`는 변수 `a`를 가리킨다** 라고 말한다. 포인터는 변수여서 특정한 메모리 공간을 차지한다. 따라서 위 그림처럼 포인터도 자기 자신만의 주소를 가진다.

## 포인터는 왜 형(Type)이 있을까

### pointer Type이 있다면

```c
int a;
pointer *p;
p = &a;
*p = 4;
```

위 코드를 컴퓨터는 아래와 같이 해석한다.

`int a;` // int 형 변수 `a` 선언, 메모리에 4 바이트 공간 생성
`pointer *p` // pointer 형 변수 `p` 선언, 메모리에 8 바이트 공간 생성
`p = &a` // 포인터 변수에 `a`의 주소값을 저장한다.
`*p = 4;` // 현재 포인터 `p`는 변수 `a`의 주소값이 들어있다. 그런데 `a`의 주소값은 모든 주소가 아니라 "시작주소"만 들어있다. `*p` 는 포인터 변수에 저장된 주소값의 데이터를 가져온다. 하지만 포인터 타입이 명확하지 않아 시작주소부터 얼마만큼을 읽어들어야 할지 알 수 없다.

### int, char 등의 Type이 있다면

```C
int a;
int *p;
p = &a;
*p = 4;
```

컴퓨터는 포인터가 `int *`형인 것을 보고 '이 포인터는 `int`데이터를 가리킨다'고 인식해 시작주소부터 4 바이트를 읽어 값을 바꾼다.

## 포인터도 변수다.

```c
#include <stdio.h>
int main()
{
 int *p;
 int a;
 int b;

 p = &a;
 *p = 2;
 p = &b;
 *p = 4;

 printf("p에 저장된 값 : %p\n", p); // p에 저장된 값 : 0x7fffd3c4cb1c
 printf("a의 주소값 : %p \n", &a); // a의 주소값 : 0x7fffd3c4cb18
 printf("b의 주소값 : %p \n", &b); // b의 주소값 : 0x7fffd3c4cb1c
 printf("-------------------\n");
 printf("포인터 변수 p의 값 : %d\n", *p); // 포인터 변수 p의 값 : 4
 printf("변수 a의 값 : %d\n", a); // 변수 a의 값 : 2
 printf("변수 b의 값 : %d\n", b); // 변수 b의 값 : 4
}
```

포인터는 변수여서 가리키는 주소값이 변한다.

# Reference

본 글은 이재범님의 모두의 코드 강좌를 정리합니다.
https://modoocode.com/23
