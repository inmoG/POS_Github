# 리버싱의 기본 : HardWare
<br/><br/><br/><br/>



# 컴퓨터 구성

- ## 컴퓨터 입력/출력 처리 과정<br/><br/>
   ![](https://images.velog.io/images/kmk9502/post/22d3e8c6-6b01-47a4-b617-a0ad49628c8b/%EC%BB%B4%ED%93%A8%ED%84%B0%20%EC%9E%85%EB%A0%A5%20%EB%B0%8F%20%EC%B6%9C%EB%A0%A5%20%EC%B2%98%EB%A6%AC%20%EA%B3%BC%EC%A0%95.png)

   - ### 주기억장치(메모리)
     - 처리할 데이터가 머무는 곳 <= `메모리를 리버싱하여 분석하는 이유`
     - 용량이 작지만 처리속도가 보조기억장치에 비해 상대적으로 빠르다.
     - CPU와 빠른 정보 통신이 가능하다.
     - 컴퓨터가 종료되면 메모리에 저장된 데이터는 초기화 된다.
   - ### 보조기억장치(SSD, HDD)
     - 용량이 크기 때문에 많은 자료를 `영구적으로` 보관할 수 있다.
     - 처리속도가 상대적으로 느려 CPU와 빠른 통신이 힘들다. 
   - ### 중앙처리장치(CPU)
     - 메모리에서 전달받는 데이터를 `어셈블리 언어로 번역한 뒤` CPU에서 다시 0과 1로 번역하여 연산을 진행한다.
   - ### 운영체제(OS)
     - 위와 같은 처리 과정의 규칙을 정의한다.
       - Ex> 메모리에 데이터가 저장되는 방법 등

<br/><br/>

- ## CPU 아키텍처<br/><br/>

    ![](https://images.velog.io/images/kmk9502/post/b5d7d2d3-1256-430f-9134-ec684982a47d/CPU%20%EB%82%B4%EB%B6%80%20%EA%B5%AC%EC%A1%B0%20%EC%B6%94%EC%83%81%ED%99%94.png)

    - ### 제어 장치(Conrtol Unit)
      - 입출력 장치 간 통신 및 조율을 담당
      - 명령어를 읽고 해석해 `데이터 처리를 위한 순서를 결정`한다. <= 스케줄링
    - ### 산술 및 논리 연산 장치(Arithmatic Logic Unit)
      - `산술 연산과 논리 연산을 계산`하는 디지털 회로
    - ### 레지스터
      - `CPU의 연산에 사용하는 데이터를 기억`하는 소규모 기억장치 => 여러 레지스터 변수들에 저장
    - ### 레지스터 변수
        ![](https://images.velog.io/images/kmk9502/post/e458202b-ef52-4fbe-8de2-4ab7a1f11957/%EB%A0%88%EC%A7%80%EC%8A%A4%ED%84%B0.png) 

        - ### 범용 레지스터
          - 정의 : 특별한 용도를 정해두지 않고 다양하게 쓸 수 있는 레지스터, 그러나 관행적으로 그 쓰임새가 정해져 있는 경우도 있다.
          - EAX
            - 주로 함수의 리턴값. 즉, 결과값을 저장
          - EBX
            - 주로 특정 메모리 주소를 가리키는 포인터로 사용
          - ECX
            - 주로 카운터 코드에 사용된다. 반복문에서 반복 횟수를 설정하는 역할 등으로 사용
          - EDX
            - 주로 곱셈과 나눗셈에 사용된다.
          - ESI
            - 주로 문자열 연산의 출발지 포인터를 저장한다.
          - EDI
            - 주로 문자열 연산의 목적지 포인터를 저장한다.
        - ### 특수 목적 레지스터
          - 정의 : 용도가 정해져 있는 레지스터이다.
          - ESP 
            - Stack Pointer의 약자로, 항상 스택의 최상단을 가리킨다. 스택에 저장된 데이터를 사용할 때 </br>사용되기도 한다.
          - EBP
            - 스택 베이스 포인터의 약자로, 함수가 시작되기 전에 스택의 기준 주소를 저장한다. 
            - 함수의 시작을 의미한다. 
            - 다른 함수를 호출할 때 호출된 함수의 스택이 호출한 함수의 스택을 침범하는 것을 <br/>막기 위해 EBP로 함수 간의 경계를 나눈다.
            - 호출된 함수가 종료되면 EBP와 EIP 값을 사용하여 이전 함수로 복귀한다.
          - EIP
            - 명령어 포인터로, 다음 실행할 명령어를 가리킨다. 
            - EBP와 함께 함수 복귀를 위해 사용된다. 
    <br/><br/>
    - ### 연산 유형
      - ### 전송
        - CPU 내의 레지스터와 메모리 사이에 데이터를 교환 = 적재, 저장
      - ### 처리
        - ALU를 사용해 데이터를 조작 = 논리, 변환
      - ### 제어
        - CU의 제어장치가 프로그램의 실행 순서를 제어하는 연산 = 반복, 조건, 호출
      - ### 입출력
        - 레지스터와 외부 장치 사이의 데이터 이동을 수행
<br/><br/>

   - ### CISC (복합 명령어 집합 구조)
     - `메모리 용량을 적게 차지`하는 프로그램을 구성할 수 있도록 설계된 프로세서<br/><br/>
     - `소규모 라인의 프로그램으로 많은 작업을 수행`하기 위해 강력한 명령어를 명령어 집합에 포함<br/><br/>
     - `가변 길이 명령어 형식`, `많은 명령어 종류`, 복잡한 주소 지정방식, 복잡한 회로 구성<br/><br/>
     - 명령어의 길이가 일정하지 않고, 명령어의 종류가 많아 명령어의 `용량이 크다.`<br/><br/>
     - Intel 계열 프로세서

    - ### RISC (축약 명령어 집합 구조)
      - `적은 수의 컴퓨터 명령어`를 사용하도록 설계된 프로세서<br/><br/>
      - CISC 구조보다 단순하지만, 더 빨리 실행되는 `소수의 명령어를 사용`하는 아키텍처<br/><br/>
      - CISC 같은 복잡하고 강력한 명령어 집합은 오히려 간단한 명령어의 해석과 실행 시간까지 증가시킨다. <br/>RISC는 명령어 집합 구조를 단순화하여` CISC의 단점을 보완했다.`<br/><br/>
      - `단순 명령어 형식`, 짧은 명령 주기, `고정 길이 명령어`, 제한된 종류의 주소 지정방식<br/><br/>
      - MIPS, `ARM 기반` IoT 디바이스와 스마트폰에서 사용<br/><br/>
      - ### TIP
        - 최근에는 CISC와 RISC를 융합해 각 구조의 장점을 강화하고 서로의 단점을 보완하는 추세이다.
  
<br/><br/>

- ## Main Memory<br/><br/>

  ![](https://images.velog.io/images/kmk9502/post/eabe55c2-e564-405b-a3b9-75f93986d448/Main%20Memory_%EA%B8%B0%EB%B3%B8%20%EC%84%B8%ED%8C%85%20%EA%B5%AC%EC%A1%B0.png)
  
  `Default Settings`

  - ### 커널 영역
    - 운영체제가 미리 할당한 커널 영역
  - ### 사용자 영역
    - 사용자가 사용할 수 있는 메모리 공간

  ![](https://images.velog.io/images/kmk9502/post/ba36b3d2-d174-4b44-91a2-59fee2680272/Main%20Memory_%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%98%81%EC%97%AD%20%ED%99%95%EC%9E%A5.png)

  `with 3GB switch`

    - ### 사용자 영역 확장
      - 커널 영역의 일부를 사용자 영역으로 사용할 수 있다.
<br/><br/><br/><br/>

  ![](https://images.velog.io/images/kmk9502/post/b483628e-df9f-46e4-bc43-addd951d9006/%EB%A9%94%EB%AA%A8%EB%A6%AC%20%EC%98%81%EC%97%AD%EC%97%90%20%EC%A0%81%EC%9E%AC%EB%90%9C%20%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4.png)

  - ### 프로세스
    - 저장장치(SSD / HDD 등)의 프로그램을 실행시키기 위해 `프로그램의 일부를 메모리로 옮긴 것`
     <br/><br/>
  ![](https://images.velog.io/images/kmk9502/post/f8257033-511d-414b-9216-7ac7f218f27f/%EB%A9%94%EB%AA%A8%EB%A6%AC%20%EC%98%81%EC%97%AD%20%EA%B0%84%20%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9.png)

  - ### 메모리 영역 간 상호작용 
      - 각 영역에 할당되어 있는 프로세스 중 A 프로세스가 C의 자원을 필요로 하여 C의 영역에 접근한다.  <br/>이때 `접근하면 안되는 데이터에 접근하지 말아야 한다.`
  - ### 운영체제의 역할
    - 프로세스들이 규칙에 의해서 서로 `접근하지 말아야 할 곳을 접근하지 못하도록 한다.`
    - 접근 가능한 영역은 접근을 허가하도록 한다.
    - 쓰기 가능한 곳만 접근을 허가하는 등의 `접근 권한을 부여한다.`
    - 그 외 등등 <br/><br/>
    - **Tip** <br/> 한 프로세스에 할당된 영역과 권한을 넘어 다른 영역 및 권한으로 침입하는 공격 = `익스플로잇(Exploit) 공격`

<br/><br/>

- ## 가상 메모리<br/><br/>

  ![](https://images.velog.io/images/kmk9502/post/98956e35-eaf7-49b5-bed8-b5c7d5fa95c4/%EA%B0%80%EC%83%81%20%EB%A9%94%EB%AA%A8%EB%A6%AC.png)

  - ### 가상 기억 장치
    - 물리 메모리가 아닌 가상의 메모리에서 프로그램을 프로세스로 나누고 `페이징` 과정을 거쳐 특정 단위인 <br/>페이지 단위로 프로세스를 자른다.
    - 나누어진 페이지들 중 `필요한 페이지만 메모리에 적재한다. `
    - 가상 메모리를 통해 메모리의 낭비를 막고 필요한 프로세스들을 모두 메인 메모리에서 실행을 시킬 수 있게 된다.
    - 메모리 관리 및 보호 방법은 `운영체제마다 다르게 정의된다.`
  - ### 운영체제의 역할 (간단하게..)
    - 하드웨어 자원을 관리하고, 응용 서비스를 제공<br/> Ex> 작업 관리자
    - 사용자와 하드웨어 사이의 인터페이스 역할
    - 하드웨어의 고장 탐색, 오류 처리, 보안 유지 
    - 그외 등등

<br/><br/>

- ## 프로그램 동작 원리<br/><br/>
  - ### IF> Chrome 브라우저 실행
    - 1. Chrome.exe 파일을 읽어들인다.
    - 2. Chrome.exe 프로그램을 가상 메모리에 프로세스 형태로 추가한다.
    - 3. Chrome.exe의 프로세스들을 페이징하여 필요한 페이지만 메모리에 적재한다.
    - 4. 메모리에서 프로세스 실행 순번을 기다린다.
    - 5. 자신의 차례가 오면 CPU로 들어가 실행된다.
    - 6. 메모리에서 CPU로 전송하고 CPU에서 결과를 반환하는 것을 수백번 이상 반복한다.
    - 7. 동시에 운영체제에게 브라우저 화면을 모니터에 출력하라는 명령을 보낸다.
    - 8. 운영체제는 Chrome 브라우저가 요청한 화면을 사용자의 모니터에 출력한다.
    - 8. 추가로 필요한 요구사항이 있으면 운영체제는 이를 받아 처리해 준다.<br/><br/>
    - 브라우저 프로그램 실행시 브라우저를 제공한 서버와 `백그라운드에서 계속 통신하며` 세션 유지 및 갱신, <br/>웹 페이지 유지 등을 수행한다.