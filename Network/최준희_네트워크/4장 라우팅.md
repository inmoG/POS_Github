# 라우팅
## 주소와 경로
- MAC 주소와 IP 주소의 차이
    - MAC 주소: 같은 네트워크 내에서의 수신처를 결정.
    - IP 주소: 수신처의 컴퓨터를 결정.
- MAC 주소로 '다음 수신처'를 지정하고 IP 주소로 '최종 수신처'를 지정해서 **최종 수신처까지의 경로** 결정.
- **홉 바이홉**: 라우터는 다음 수신처를 결정하고 이것이 연결되어 경로가 되는 것을 반복하는 방식.
- 라우터가 없으면 다른 네트워크에 데이터그램을 보낼 수 없음.
- **디폴트 게이트웨어**: 컴퓨터에 설정되어 있는 라우터.(컴퓨터가 다음에 보낼 라우터.)
- 다른 네트워크 수신이면 라우터(디폴트 게이트웨어)로 네트워크 수신이면 직접 통신.

## 라우터
- 라우터는 없으면 다른 네트워크에 데이터그램을 송신 할 수 없음.
(*인터넷작업을 가능 하게하는 기기가 라우터.*)
- 라우터는 어떤 네트워크에서 다른 네트워크에 데이터그램을 보내는 역할을 하고 '네트워크와 네트워크의 경계상'에 배치되기 때문에 *복수의 인터페이스*를 가짐.
- 라우터의 각 인터페이스는 *각각의 네트워크에 소속되어 있는 형태*. 
- **라우팅**: 데이터그램의 수신처 IP 주소를 근거로 다음에 송신하는 라우터를 결정.
- 라우터는 네트워크 경계선상에 있기 때문에 *복수의 네트워크끼리 연결*하는 역할음 함.
- **필터링**: 전송받은 데이터그램에 대해 조건을 붙여 그 데이터그램을 파기.
- **라우터 테이블**: 라우터가 수신한 패킷이 수신처까지 도달하기 위해 최적의 경로가 그려져 있는 지도.
(수신처 네트워크까지의 거리, 다음에 도달하는 라우터, 그 라우터에 연결되어 있는 자신의 인터페이스 등 기재.)
- **최장일치 룰**: 수신처 IP 주소와 비트가 가장 일치하는 것을 선택.

## 디폴트 게이트웨이
- **브로드캐스트 도메인**: 브로드캐스트가 도달하는 범위.
- 충돌 도메인은 *스위치*가 구분하고 브로드캐스트 도메인은 *라우터*가 구분.
- 라우터는 브로드캐스트를 중지해버리기 때문에 다른 네트워크에 있는 수신처 MAC 주소를 ARP로부터 입수할 수 없음.
- 컴퓨터가 최초로 데이터를 보내는 수신처는  *디폴트 게이트웨이*임.
- 컴퓨터는 다른 네트워크에 데이터를 송신할 때 디폴트 게이트웨이로 ARP를 수행.

## 라우팅
- **정적라우팅**과 **동적 라우팅**
- 정적라우팅
    - 관리자가 수동으로 경로 입력하는 방법.
    - 수동으로 입력한 경로를 사용할 수 없는 경우가 생김.
- 동적 라우팅
    - 라우터가 자동으로 정보를 서로 교환해서 경로를 알아내는 방법.
    - 회선 정보 압박
    - 데이터 전송에 사용되는 분량이 줄어듬.
    - 서로 교환한 정보를 가지고 최적의 경로를 계산해야함.(라우터가 안좋으면 데이터그램의 전송처리가 늦어짐.)
    - 모든 라우터가 동일한 정보를 가져야함.(= 컨버전스)

## 라우팅 프로토콜
- **라우팅 프로토콜**: 근접해 있는 라우터 간의 네트워크 정보를 서로 교환하기 위한 규칙.
- **자율화 시스템**: 하나의 관리 단체에 의해 관리되는 네트워크 집합체.
- 라우팅 프로토콜은 두 종류의**AS 간 라우팅용(EGP)**과 **AS 내부 라우팅용(IGP)**으로 나뉨.
- 라우팅 프로토콜은 경로 정보를 언제, 어떻게, 누구에게, 어떤 정보를 전송할지를 결정.

## RIP
- **RIP**: 디스턴스벡터형 라우팅 프로토콜.
- **메트릭**: 최적의 경로를 결정할 때의 판단기준.
- *RIP에서의 라우팅 업데이트* = *라우터가 다른 라우터와 교환하는 정보*.
- 라우팅 업데이트를 교환하고 모르는 경로 정보를 입수.
- RIP는 업데이트를 수신하면 자기가 모르는 네트워크를 테이블에 추가하는 것인데 *업데이트를 보내 온 라우터를 그 앞의 네트워크에의 중계 라우터로*, 업데이트를 받은 인터페이스를 그 앞의 네트워크에의 송신 인터페이스로 정함.
- 알고 있는 경로의 정보를 입수한 경우 메트릭으로 판단.
- 업데이트로 받은 라우팅 테이블을 자신의 것과 비교해서 테이블을 갱신.

## ICMP
- **ICMP**: 인터넷 제어 메시지 프로토콜(=에러 보고 프로토콜)
- ICMP에서 사용되는 정보를 IP로 선택.
- ICMP의 두 종류의 메시지 **QURRY 메시지**와 **ERROR 메시지**
- QURRY 메시지: 상태를 조사하기 위해 사용되는 메시지.
- ERROR 메시지: 에러를 통지하기 위해 사용되는 메시지.
- **TTL**: 생존시간.(= IP 데이터그램의 생존시간)
- IP 데이터그램의 TTL은 라우터를 경유할 때 마다 1만큼씩 줄어들고, 0이되면 그 데이터그램은 파기함.
- **타입 3 = DESTINATION UNREACHABLE**: 수신처에 도달하지 않는 이유를 통지. 

## ECHO 와 TIME EXCEEDED
- **타입 0 = ECHO**과 **타입 8 = ECHO REQUEST**: 에코 요청을 수신하면 에코 응답을 보냄.
    - 송신처와 수신처 간의 데이터를 송수신할 수 있음.
    - 네트워크 상태를 조사할 수 있음.
- **타입 11 = TIME EXCEEDED**: 시간초과에 의한 패킷 파기.
(TTL은 끊어진 패킷을 파기하는데 파기한 것을 통지하는 메시지)
- **TRACEROUTE**: 타입 11을 사용한 네트워크의 체크용 소프트웨어.
(수신처까지의 경로를 가르쳐 주는 소프트웨어 = 수신처에 도달하기까지 경유하는 라우터.)