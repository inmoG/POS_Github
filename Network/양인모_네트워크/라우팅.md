# 주소와 경로

MAC : 다음 통신기기(라우터, 스위치 등)의 수신처이자 같은 네트워크 내에서의 수신처로서 계송 갱신된다.
IP : 수신처 컴퓨터, 데이터의 최종 목적지로서 갱신되지 않는다.

MAC 주소로 다음 수신처를 지정하며 최종 수신처에 도달하기 까지 MAC주소는 갱신된다. IP주소로 최종 수신처를 확인한다.

## 라우터

- 네트워크에서 네트워크로 패킷을 보내는 역할을 하고 네트워크와 네트워크의 경계에 배치되어 복수의 인터페이스로 구성되어 각각 다른 IP주소를 가진다.

- 수신처까지의 경로를 결정하는 역할

- 라우터는 다음 수신처를 결정하고 이것이 연결되어 경로가 된다.

- 다른 네트워크 수신이면 라우터(디폴트 게이트웨이)로 동일 네트워크이면 직접 통신한다.

- 라우팅

  패킷의 수신처 IP 주소를 근거로 다음에 송신하는 라우터를 결정해 경로를 생성한다.

- 필터링

  특정 조건에 부합하는 데이터를 파기하는 방법

### 라우팅 테이블

최적 경로를 안내하는 지도로서 수신처 네트워크까지의 거리, 다음에 도달하는 라우터, 송신할 인터페이스, 그 라우터에 연결되어 있는 자신의 인터페이스 등이 기록된다.

#### 동작

1. PC로부터 패킷을 수신 받는다.
2. 수신처 IP주소로부터 수신처 네트워크를 결정한다.
3. 라우팅 테이블에서 다음 중계할 라우터, 송신할 인터페이스가 결정된다.
4. 결정된 인터페이스로부터 패킷을 송신한다.

- 최장일치의 룰

  수신처 IP 주소와 비트가 가장 일치하는 것을 선택한다.

## ARP와 라우터

라우터가 네트워크를 나눠 브로드캐스트가 다른 네트워크에 송신되지 않는다. 그래서 다른 네트워크에 있는 수신처 MAC 주소를 ARP로 얻을 수 없다.

- 브로드캐스트 도메인

  브로드캐스트가 도달하는 범위

### 디폴트 게이트웨이

네트워크의 출입구, 컴퓨터가 최초로 데이터를 보내는 수신처로서 데이터를 다른 네트워크로 송신하려면 디폴트 게이트웨이(라우터)를 거쳐야한다. 컴퓨터가 다른 네트워크에 데이터를 송신하면 디폴트 게이트웨이로 ARP를 수행한다. 디폴트 게이트웨이 IP 주소를 모르면 안되 DHCP 또는 수동으로 미리 설정해야 한다.

#### 동작

- 동일 네트워크

  1. 수신처 IP 주소로 ARP를 보낸다.
  2. 수신처의 MAC 주소를 얻는다.

- 다른 네트워크

  1. PC는 디폴트 게이트웨이로 ARP를 수행해 디폴트 게이트웨이의 MAC주소를 얻는다.
  2. PC는 수신처 MAC주소를 디폴트 게이트웨이로, 수신처 IP 주소를 수신처 호스트로 해서 패킷을 보낸다.
  3. 수신받은 디폴트 게이트웨이는 라우팅을 하고, 중계 라우터, 송신포트를 결정하여 다음에 수신받을 상대(중계 라우터 또는 수신처)에게 ARP를 수행한다.
  4. ARP에 의해 입수한 MAC주소를 수신처 MAC 주소로, 자신의 MAC주소를 송신처 MAC주소로 갱신해 송신한다. IP 주소는 변경되지 않는다.
